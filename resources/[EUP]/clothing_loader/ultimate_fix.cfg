# Ultimate Fix for illenium-appearance Framework Issues
# This addresses all remaining server-side framework problems

echo "=== Ultimate illenium-appearance Fix ==="

# Stop the resource completely
echo "Stopping illenium-appearance..."
stop illenium-appearance

# Wait for complete shutdown
wait 3000

# Ensure QBX Core is running first
echo "Checking QBX Core status..."
if [ "$(resource qbx_core)" = "started" ]; then
    echo "QBX Core is running - good!"
else
    echo "Starting QBX Core first..."
    start qbx_core
    wait 2000
fi

# Start illenium-appearance with debug output
echo "Starting illenium-appearance with framework fixes..."
start illenium-appearance

# Wait for initialization
wait 5000

# Check status
echo "Checking resource status..."
refresh

echo "=== Ultimate Fix Complete ==="
echo "Check console for framework initialization messages:"
echo "- Should see: 'Using QBX Core on server'"
echo "- Should NOT see: 'GetPlayerID' errors"
echo ""
echo "If errors persist, the issue may be with QBX Core compatibility"
echo "Try restarting QBX Core first, then illenium-appearance"
