import{K as q,u as p,r as f,j as n,m as O,S as F,a as e,I as Z,L as c,X as y,d as j,t as K,v as M,b5 as v,ay as Y,F as E,B as J,C as X,f as z,P as D,b6 as G,b7 as Q,aO as ee,b8 as te,T as ie,b as U,aX as ne,A as le,b9 as re,ba as ce,bb as se,bc as ae}from"./index-569b241b.js";import{S as $}from"./Switch-55d464d2.js";const k=q(null);function oe(){const t=p(k),[a,u]=f.useState((t==null?void 0:t.label)??""),[s,d]=f.useState({hour:(t==null?void 0:t.hour)??0,minute:(t==null?void 0:t.minute)??0}),i=()=>{let l={label:a&&a.length>0?a:null,minutes:s.minute,hours:s.hour};K("Clock",{action:t!=null&&t.id?"updateAlarm":"createAlarm",id:t==null?void 0:t.id,...l},Math.floor(Math.random()*1e3)+1).then(m=>{if(!m)return M("error",`Failed to ${t!=null&&t.id?"update":"create"} alarm`);t!=null&&t.id?v.Alarms.set(v.Alarms.value.map(h=>h.id===t.id?{id:t.id,...l,enabled:h.enabled}:h)):v.Alarms.set([...v.Alarms.value,{...l,id:m,enabled:!0}]),k.reset(),N.set("Alarm")})},r=(l,m)=>{const L=document.querySelector(`#${m}`).querySelector(".active");let C=l.deltaY>0?L.nextElementSibling:L.previousElementSibling;C==null||C.click()};return f.useEffect(()=>{if(!(t!=null&&t.hour))return;const l=document.querySelector("#hour"),m=document.getElementById(`h-${s.hour}`);if(l&&m){const C=m.offsetTop-l.offsetHeight/2+m.offsetHeight/2;l.scrollTo(0,C+12)}const h=document.querySelector("#minute"),L=document.getElementById(`m-${s.minute}`);if(h&&L){const C=L.offsetTop-h.offsetHeight/2+L.offsetHeight/2;h.scrollTo(0,C+12)}},[t]),n(O.div,{...F("left","new-alarm",.2),className:"new-alarm-container",children:[n("div",{className:"new-alarm-header",children:[n("div",{className:"cancel",onClick:()=>{k.reset(),N.set("Alarm")},children:[e(Z,{}),c("APPS.CLOCK.ALARM.ALARMS")]}),n("div",{className:"title",children:[" ",t!=null&&t.id?c("APPS.CLOCK.ALARM.EDIT_ALARM"):c("APPS.CLOCK.ALARM.NEW_ALARM")]}),e("div",{className:"save",onClick:()=>i(),children:c("APPS.CLOCK.ALARM.SAVE")})]}),n("div",{className:"new-alarm-content",children:[n("div",{className:"picker alarm",children:[e("div",{children:n("ul",{id:"hour",onWheel:l=>r(l,"hour"),children:[e("li",{}),[...Array(24).keys()].map((l,m)=>n("li",{id:`h-${l.toString()}`,className:y(s.hour===l&&"active"),onClick:h=>{h.target.classList.contains("active")||(h.target.scrollIntoView({block:"center",behavior:"smooth"}),d({...s,hour:l}))},children:[l<10?`0${l}`:l," "]},m)),e("li",{})]})}),e("div",{className:"separator",children:":"}),e("div",{children:n("ul",{id:"minute",onWheel:l=>r(l,"minute"),children:[e("li",{}),[...Array(60).keys()].map((l,m)=>e("li",{id:`m-${l.toString()}`,className:y(s.minute===l&&"active"),onClick:h=>{h.target.classList.contains("active")||(h.target.scrollIntoView({block:"center",behavior:"smooth"}),d({...s,minute:l}))},children:l<10?`0${l}`:l},m)),e("li",{})]})}),e("div",{className:"selected"})]}),n("div",{className:"settings",children:[n("div",{className:"item",children:[e("div",{className:"label",children:c("APPS.CLOCK.ALARM.LABEL")}),e(j,{type:"text",placeholder:c("APPS.CLOCK.ALARM.TITLE"),defaultValue:a,onChange:l=>u(l.target.value)})]}),n("div",{className:"item",children:[e("div",{className:"label",children:c("APPS.CLOCK.ALARM.SOUND")}),e($,{disabled:!0,checked:!0})]}),n("div",{className:"item",children:[e("div",{className:"label",children:c("APPS.CLOCK.ALARM.SNOOZE")}),e($,{disabled:!0,checked:!1})]})]})]})]})}function de(){const t=p(D.Settings),[a,u]=f.useState(!1),s=p(v.Alarms),d=i=>{let r=i.hour,l=i.minute;M("info",`Formatting time: ${r}:${l}`),t.time.twelveHourClock&&(r>12?r=r-12:r===0&&(r=12));let m,h;return r<10?m=`0${r}`:m=`${r}`,l<10?h=`0${l}`:h=`${l}`,t.time.twelveHourClock?`${m}:${h} ${i.hour>12?"PM":"AM"}`:`${m}:${h}`};return n("div",{className:"alarm-container",children:[n("div",{className:"alarm-header",children:[n("div",{className:"alarm-header-top",children:[e("div",{className:"edit",onClick:()=>u(!a),children:a?c("APPS.CLOCK.ALARM.DONE"):c("APPS.CLOCK.ALARM.EDIT")}),e(Y,{onClick:()=>N.set("NewAlarm")})]}),e("div",{className:"alarm-title",children:c("APPS.CLOCK.ALARM.TITLE")})]}),e("div",{className:"alarm-content",children:s.sort((i,r)=>i.hours===r.hours?i.minutes-r.minutes:i.hours-r.hours).map((i,r)=>e(O.div,{initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},viewport:{once:!0},className:"alarm","data-active":i.enabled,onClick:()=>{a&&(k.set({id:i.id,hour:i.hours,minute:i.minutes,label:i.label}),N.set("NewAlarm"))},children:a?n(E,{children:[n("div",{className:"alarm-wrapper",children:[e(J,{onClick:l=>{l.stopPropagation(),X.PopUp.set({title:c("APPS.CLOCK.ALARM.DELETE_TITLE"),description:c("APPS.CLOCK.ALARM.DELETE_TEXT"),buttons:[{title:c("APPS.CLOCK.ALARM.BUTTON_CANCEL")},{title:c("APPS.CLOCK.ALARM.BUTTON_DELETE"),color:"red",cb:()=>{K("Clock",{action:"deleteAlarm",id:i.id},!0).then(()=>{v.Alarms.set(s.filter(m=>m.id!==i.id))})}}]})}}),n("div",{className:"alarm-info",children:[e("div",{className:"time",children:d({hour:i.hours,minute:i.minutes})}),e("div",{className:"label",children:i.label??c("APPS.CLOCK.ALARM.TITLE")})]})]}),e(z,{})]}):n(E,{children:[n("div",{className:"alarm-info",children:[e("div",{className:"time",children:d({hour:i.hours,minute:i.minutes})}),e("div",{className:"label",children:i.label??c("APPS.CLOCK.ALARM.TITLE")})]}),e($,{checked:i.enabled,onChange:()=>{K("Clock",{action:"toggleAlarm",id:i.id,enabled:!i.enabled},!0).then(l=>{if(l===void 0)return M("error","Failed to toggle alarm");v.Alarms.set(s.map((m,h)=>(h===r&&(m.enabled=!m.enabled),m)))})}})]})},r))})]})}function R(t){let a=t.disabled,u=t.active;return e("div",{className:y("button",u&&"active",a&&"disabled"),children:e("div",{className:"button-inner",style:{fontSize:t.content.length>7?"12px":"15px"},onClick:()=>t.onClick(),children:t.content})})}function me(){const t=p(v.Stopwatch);return n("div",{className:"stopwatch-container",children:[e("div",{className:"stopwatch-header",children:e("div",{className:"stopwatch-title",children:c("APPS.CLOCK.STOPWATCH.TITLE")})}),n("div",{className:"stopwatch-content",children:[e("div",{className:"clock",children:b(t.time,!0)}),n("div",{className:"actions",children:[e(R,{content:t.running||!t.running&&t.time==0?c("APPS.CLOCK.STOPWATCH.LAP"):c("APPS.CLOCK.STOPWATCH.RESET"),disabled:!t.running&&t.time===0,onClick:()=>{!t.running&&t.time!==0?v.Stopwatch.set({running:!1,time:0,laps:[]}):t.time>0&&v.Stopwatch.set({...t,laps:[...t.laps,t.time]})}}),e(R,{active:t.running,content:t.running?c("APPS.CLOCK.STOPWATCH.STOP"):c("APPS.CLOCK.STOPWATCH.START"),onClick:()=>v.Stopwatch.set({...t,running:!t.running})})]}),e("div",{className:"laps","data-empty":t.laps.length===0,children:n("table",{style:{borderSpacing:`${t.laps.length===0?"3.5rem":"2.6rem"} 1rem`},children:[e("thead",{children:n("tr",{children:[e("th",{children:c("APPS.CLOCK.STOPWATCH.LAP")}),e("th",{children:c("APPS.CLOCK.STOPWATCH.TIME")}),e("th",{children:c("APPS.CLOCK.STOPWATCH.TOTAL")})]})}),n("tbody",{children:[t.laps.length===0&&e("tr",{children:e("td",{className:"no-laps",colSpan:3,children:c("APPS.CLOCK.STOPWATCH.NO_LAPS")})}),(()=>{if(t.laps.length===0)return null;const a=t.laps.map((d,i)=>i===0?d:d-t.laps[i-1]),u=a.indexOf(Math.min(...a)),s=a.indexOf(Math.max(...a));return t.laps.map((d,i)=>{const r=i===u,l=i===s;return n(O.tr,{initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},viewport:{once:!0},"data-best":r,"data-worst":l,children:[e("td",{children:i+1}),e("td",{children:b(i===0?d:d-t.laps[i-1],!0)}),e("td",{children:b(d,!0)})]},d)})})()]})]})})]})]})}function he(){const t=p(U),a=p(D.Settings),u=p(ne.Visible),s=p(v.Timer),[d,i]=f.useState([]),[r,l]=f.useState({hours:0,minutes:0,seconds:0}),m=f.useRef(null),h=f.useRef(null),L=f.useRef(null),[C,W]=f.useState(null);f.useEffect(()=>{let o=new Date(Date.now()+s.time*1e3);W(o.toLocaleTimeString(t==null?void 0:t.DateLocale,{hour:"numeric",minute:"numeric",hour12:a.time.twelveHourClock}));let A=localStorage.getItem("recent-timers");i(A?JSON.parse(A):[])},[]);const H=o=>{if(o||(o=r.hours*3600+r.minutes*60+r.seconds),o>0){v.Timer.set({running:!0,time:o,timeLeft:o});let A=new Date(Date.now()+o*1e3);W(A.toLocaleTimeString(t==null?void 0:t.DateLocale,{hour:"numeric",minute:"numeric",hourCycle:"h23"}));let S=[o,...d.filter(g=>g!==o)];S.length>5&&S.shift(),localStorage.setItem("recent-timers",JSON.stringify(S)),i(S)}},I=(o,A)=>{const g=document.querySelector(`#${A}`).querySelector(".active");let P=o.deltaY>0?g.nextElementSibling:g.previousElementSibling;P==null||P.click()},V=f.useRef(!0);return f.useEffect(()=>{var o,A,S;if(V.current){V.current=!1;return}if(!s.running&&(v.Timer.patch({running:!1,timeLeft:0}),u)){let g=(o=m.current)==null?void 0:o.querySelector(".active"),P=(A=h.current)==null?void 0:A.querySelector(".active"),w=(S=L.current)==null?void 0:S.querySelector(".active");g&&(g==null||g.scrollIntoView({block:"center"})),P&&(P==null||P.scrollIntoView({block:"center"})),w&&(w==null||w.scrollIntoView({block:"center"}))}},[s.running]),n("div",{className:"timer-container",children:[e("div",{className:"timer-header",children:e("div",{className:"timer-title",children:c("APPS.CLOCK.TIMER.TITLE")})}),n("div",{className:"timer-content",children:[s.running?e(E,{children:n("div",{className:"timer-wrapper",children:[e("div",{className:"border-wrapper",children:e(G,{value:s.timeLeft/s.time*100,strokeWidth:4,styles:Q({strokeLinecap:"butt",pathColor:"#348DE9",trailColor:a.display.theme==="light"?"#AAAAAA":"#303030",pathTransitionDuration:.5})})}),n("div",{className:"timer",children:[e("div",{className:"timer-text",children:b(s.timeLeft,!1)}),C&&n("div",{className:"when-done",children:[e(ee,{}),C]})]})]})}):n(E,{children:[n("div",{className:"picker-labels",children:[e("div",{children:c("APPS.CLOCK.TIMER.HOURS")}),e("div",{children:c("APPS.CLOCK.TIMER.MINUTES")}),e("div",{children:c("APPS.CLOCK.TIMER.SECONDS")})]}),n("div",{className:"picker",children:[e("div",{ref:m,children:n("ul",{id:"hours",onWheel:o=>{I(o,"hours")},children:[e("li",{}),[...Array(24).keys()].map((o,A)=>e("li",{onClick:S=>{S.target.scrollIntoView({block:"center",behavior:"smooth"}),l({...r,hours:o})},className:r.hours===o?"active":"",children:o},A)),e("li",{})]})}),e("div",{ref:h,children:n("ul",{id:"minutes",onWheel:o=>{I(o,"minutes")},children:[e("li",{}),[...Array(60).keys()].map((o,A)=>e("li",{onClick:S=>{S.target.scrollIntoView({block:"center",behavior:"smooth"}),l({...r,minutes:o})},className:r.minutes===o?"active":"",children:o},A)),e("li",{})]})}),e("div",{ref:L,children:n("ul",{id:"seconds",onWheel:o=>{I(o,"seconds")},children:[e("li",{}),[...Array(60).keys()].map((o,A)=>e("li",{onClick:S=>{S.target.scrollIntoView({block:"center",behavior:"smooth"}),l({...r,seconds:o})},className:r.seconds===o?"active":"",children:o},A)),e("li",{})]})}),e("div",{className:"selected"})]})]}),n("div",{className:"actions",children:[e(R,{content:c("APPS.CLOCK.TIMER.CANCEL"),disabled:!s.running,onClick:()=>{s.running&&v.Timer.set({running:!1,time:0,timeLeft:0})}}),e(R,{content:s.running?c("APPS.CLOCK.TIMER.STOP"):c("APPS.CLOCK.TIMER.START"),active:s.running,onClick:()=>s.running?v.Timer.set({...s,running:!1}):H()})]}),!s.running&&n("div",{className:"recents",children:[e("div",{className:"title",children:"Recents"}),n("div",{className:"recents-wrapper","data-empty":d.length===0,children:[d.length===0&&e("div",{className:"no-recents",children:c("APPS.CLOCK.TIMER.NO_RECENTS")}),d.map((o,A)=>n(O.div,{initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},viewport:{once:!0},className:"item",children:[e("div",{className:"time",children:b(o)}),n("div",{className:"buttons",children:[e(te,{className:"red",onClick:()=>{let S=d.filter((g,P)=>P!==A);localStorage.setItem("recent-timers",JSON.stringify(S)),i(S)}}),e(ie,{className:"green",onClick:()=>H(o)})]})]},A))]})]})]})]})}function ue(){const t=p(U),a=p(D.Settings),u=t.world_clock_locations,s=i=>new Date().toLocaleTimeString(t.DateLocale,{timeZone:u[i],hour:"2-digit",minute:"2-digit",hour12:a.time.twelveHourClock}),d=i=>{const r=new Date;let l=r.toLocaleTimeString([],{hour:"2-digit",hour12:!1}),m=r.toLocaleDateString([],{day:"numeric"}),h=r.toLocaleTimeString([],{hour:"2-digit",hour12:!1,timeZone:u[i]}),L=r.toLocaleDateString([],{day:"numeric",timeZone:u[i]}),C=parseInt(h)-parseInt(l);return C===0?"Local time":L>m?`${c("APPS.CLOCK.WORLDCLOCK.TOMORROW")} ${C>0?"+":""}${C}HRS`:L<m?`${c("APPS.CLOCK.WORLDCLOCK.YESTERDAY")} ${C>0?"-":""}${C}HRS`:`${c("APPS.CLOCK.WORLDCLOCK.TODAY")} ${C>0?"+":""}${C}HRS`};return n("div",{className:"worldclock-container",children:[e("div",{className:"worldclock-header",children:e("div",{className:"worldclock-title",children:c("APPS.CLOCK.WORLDCLOCK.TITLE")})}),e("div",{className:"worldclock-content",children:Object.keys(u).map((i,r)=>n(O.div,{initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},viewport:{once:!0},className:"worldclock",children:[n("div",{className:"worldclock-location",children:[e("div",{className:"location",children:i}),e("div",{className:"difference",children:d(i)})]}),e("div",{className:"time",children:s(i)})]},r))})]})}var _,x,B;const N=q(((B=(x=(_=le.value)==null?void 0:_.active)==null?void 0:x.data)==null?void 0:B.view)??"Timer"),T={"World Clock":{icon:e(re,{}),title:c("APPS.CLOCK.WORLDCLOCK.TITLE"),view:e(ue,{})},Alarm:{icon:e(ce,{}),title:c("APPS.CLOCK.ALARM.TITLE"),view:e(de,{})},Stopwatch:{icon:e(se,{}),title:c("APPS.CLOCK.STOPWATCH.TITLE"),view:e(me,{})},Timer:{icon:e(ae,{}),title:c("APPS.CLOCK.TIMER.TITLE"),view:e(he,{})},NewAlarm:{view:e(oe,{}),title:c("APPS.CLOCK.ALARM.NEW_ALARM"),hidden:!0}};function Se(){const t=p(N);return n("div",{className:"clock-container",children:[e(O.div,{...F(t==="NewAlarm"?"right":"left",t,.2),className:"clock-body",children:T[t].view}),e("div",{className:"clock-footer",children:Object.keys(T).filter(a=>!T[a].hidden).map((a,u)=>{var d,i,r;let s=t==a||t=="NewAlarm"&&a=="Alarm";return n("div",{className:`${s?"active":""}`,style:{fontSize:((d=T[a])==null?void 0:d.title.length)>10?"13px":"14px"},onClick:()=>N.set(a),children:[(i=T[a])==null?void 0:i.icon,(r=T[a])==null?void 0:r.title]},u)})})]})}const b=(t,a)=>{if(a){let u=t%100,s=Math.floor(t/100)%60,d=Math.floor(t/6e3)%60,i=Math.floor(t/36e4)%24;return i>0?`${i.toString().padStart(2,"0")}:${d.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}.${u.toString().padStart(2,"0")}`:`${d.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}.${u.toString().padStart(2,"0")}`}else{let u=t%60,s=Math.floor(t/60)%60;return`${(Math.floor(t/3600)%24).toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}:${u.toString().padStart(2,"0")}`}},ve=t=>{if(!t)return;const a=t.parentElement.parentElement;if(!a)return console.error("Failed to snap element");const u=a.getBoundingClientRect(),s=t.getBoundingClientRect(),d=s.top-u.top,r=a.scrollTop+d-u.height/2+s.height/2;a.scrollTo({top:r,behavior:"smooth"})};export{N as View,Se as default,b as formatTime,ve as snapElement};
